<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>상장사 재무제표 분석용 다트 시스템 데이터 | Python for Process Innovation</title>
    <meta name="description" content="Finance Analyst 직무와 관련된 분이라면 유용할 수 있는 자료를 공유합니다.">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    
    <link rel="preload" href="/assets/css/0.styles.a134bda1.css" as="style"><link rel="preload" href="/assets/js/app.cbae415f.js" as="script"><link rel="preload" href="/assets/js/3.aaca8d00.js" as="script"><link rel="preload" href="/assets/js/15.0147dcd6.js" as="script"><link rel="prefetch" href="/assets/js/1.e3bfa02a.js"><link rel="prefetch" href="/assets/js/10.2c2e60c5.js"><link rel="prefetch" href="/assets/js/11.6a2083e9.js"><link rel="prefetch" href="/assets/js/12.bd920b11.js"><link rel="prefetch" href="/assets/js/13.96e0d6fa.js"><link rel="prefetch" href="/assets/js/14.34fb7b1d.js"><link rel="prefetch" href="/assets/js/16.39351d19.js"><link rel="prefetch" href="/assets/js/17.1b6c10b7.js"><link rel="prefetch" href="/assets/js/18.b4a97ad2.js"><link rel="prefetch" href="/assets/js/19.c9be2942.js"><link rel="prefetch" href="/assets/js/20.bb23b3c9.js"><link rel="prefetch" href="/assets/js/21.fd38776d.js"><link rel="prefetch" href="/assets/js/22.e4efa8b6.js"><link rel="prefetch" href="/assets/js/23.966fa64f.js"><link rel="prefetch" href="/assets/js/24.f365213e.js"><link rel="prefetch" href="/assets/js/4.8afc31c3.js"><link rel="prefetch" href="/assets/js/5.33f50ecc.js"><link rel="prefetch" href="/assets/js/6.04a27dc0.js"><link rel="prefetch" href="/assets/js/7.07ea371c.js"><link rel="prefetch" href="/assets/js/8.d7a6d9af.js"><link rel="prefetch" href="/assets/js/9.eedbc95d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a134bda1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="layout" data-v-593c3a53><div data-app="true" id="main" class="application theme--light" data-v-593c3a53><div class="application--wrap"><div class="flex white" data-v-593c3a53><nav class="#EEEEEE v-toolbar v-toolbar--card theme--light" style="margin-top:0px;padding-right:0px;padding-left:0px;transform:translateY(0px);" data-v-593c3a53><div class="v-toolbar__content" style="height:56px;"><div class="v-toolbar__title" data-v-593c3a53>su79eu7k</div> <div class="spacer" data-v-593c3a53></div> <div class="v-toolbar__items" data-v-593c3a53><a href="/" class="v-btn v-btn--flat theme--light" data-v-593c3a53><div class="v-btn__content">Home</div></a> <a href="/blog/" class="v-btn v-btn--flat theme--light" data-v-593c3a53><div class="v-btn__content">Blog</div></a></div></div></nav> <div dark="" class="v-parallax" style="height:500px;" data-v-593c3a53><div class="v-parallax__image-container"><img src="https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg" alt="" class="v-parallax__image" style="display:block;opacity:0;transform:translate(-50%, 0px);"></div><div class="v-parallax__content"><div class="layout align-center column justify-center" data-v-593c3a53><div class="display-2 font-weight-bold mb-3" data-v-593c3a53>Python for Process Innovation</div> <div class="subheading" data-v-593c3a53>#Python, #Javascript, #SAP, #Automation, #ML, #AI</div></div></div></div> <div id="blog" data-v-0c44d7b6 data-v-593c3a53><div class="layout justify-center" data-v-0c44d7b6 data-v-0c44d7b6><div class="flex xs12 sm10 md10 lg8 xl8" data-v-0c44d7b6 data-v-0c44d7b6><div class="layout column" data-v-41180823 data-v-41180823 data-v-0c44d7b6><div class="flex mx-3 mt-4 mb-2" data-v-41180823 data-v-41180823><div class="display-2 font-weight-bold" data-v-41180823>상장사 재무제표 분석용 다트 시스템 데이터</div> <div class="body-1" data-v-41180823>
            Tags:
            
                #<a data-v-41180823>Python</a>
                #<a data-v-41180823>Pandas</a>
                #<a data-v-41180823>Finance</a>
                #<a data-v-41180823>Analysis</a></div> <div class="body-1" data-v-41180823>Update: 2019-01-07</div></div> <!----></div> <div class="content default" data-v-0c44d7b6><p><a href="http://dart.fss.or.kr/" target="_blank" rel="noopener noreferrer">다트 전자공시시스템<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, 오랜만에 홈페이지에 가 보니, 대한민국 기업정보의 창이라는 로고 위의 작은 문구가 눈에 띄는군요. 언제부터인지 정확히 기억은 나지 않지만, 이 곳에서는 금융업을 제외한 상장법인의 재무제표를 텍스트파일 형태로 제공하고 있습니다(제가 발견한 것은 2~3년 전으로 기억합니다.).</p> <p>IFRS XBRL 편집기를 통해 제출된 데이터라고는 하지만 아직 모든 기업들이 IFRS 표준 계정과목으로 통일된 자료로 제출되는 것이 아니기 때문에 이를 효과적으로 이용하기 위해서는 당연히 사전 가공이 필요하며, 여느 미가공 데이터 처럼 그 구조와 각종 예외를 파악하기 위해선 다소의 시간과 노력이 필요합니다.</p> <p>아래 코드는 주요 재무비율들과 관련된 IFRS 계정들의 소위 '가지고 놀아볼 만한' 수준의 1차 가공을 할 수 있는 간단한 코드이며, 이를 통해 오토인코더, t-SNE 등 다양한 재미있는 것들을 해 보실 수 있을 것입니다. 제 경우엔 나중에 실제로 신규 고객 재무제표 평가(기업간 비교를 통한 SAP Credit Limit 산정) 관련 업무에 적용 하여 나름 괜찮은 결과를 얻기도 했습니다.</p> <p>코드에는 2016년도 사업보고서를 대상으로 하고 있지만 제가 사용해본 결과 2015, 2017, 2018 재무제표를 대상으로 모두 사용 가능 합니다. 물론 데이터의 무결성 요구 등에 따라 제거되는 기업이 있을 수 있다는 점을 참고하시고 필요하다면 수정해서 사용하시기 바랍니다.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># engine='python'은 pd.read_table의 CParserWrapper 관련 문제를 우회하기 위한 설정</span>
bs <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'2016_사업보고서_01_재무상태표_20170524.txt'</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'cp949'</span><span class="token punctuation">,</span> engine<span class="token operator">=</span><span class="token string">'python'</span><span class="token punctuation">)</span>
pl <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'2016_사업보고서_02_손익계산서_20170524.txt'</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'cp949'</span><span class="token punctuation">,</span> engine<span class="token operator">=</span><span class="token string">'python'</span><span class="token punctuation">)</span>
pl_i <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'2016_사업보고서_03_포괄손익계산서_20170524.txt'</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'cp949'</span><span class="token punctuation">,</span> engine<span class="token operator">=</span><span class="token string">'python'</span><span class="token punctuation">)</span>

pl <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>pl<span class="token punctuation">,</span> pl_i<span class="token punctuation">]</span><span class="token punctuation">)</span>

bs <span class="token operator">=</span> bs<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'재무제표종류'</span><span class="token punctuation">,</span> <span class="token string">'시장구분'</span><span class="token punctuation">,</span> <span class="token string">'업종'</span><span class="token punctuation">,</span> <span class="token string">'결산월'</span><span class="token punctuation">,</span> <span class="token string">'보고서종류'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>how<span class="token operator">=</span><span class="token string">'all'</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
bs <span class="token operator">=</span> bs<span class="token punctuation">[</span><span class="token operator">~</span>bs<span class="token punctuation">[</span><span class="token string">'항목명'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>contains<span class="token punctuation">(</span><span class="token string">'abstract'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

pl <span class="token operator">=</span> pl<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'재무제표종류'</span><span class="token punctuation">,</span> <span class="token string">'시장구분'</span><span class="token punctuation">,</span> <span class="token string">'업종'</span><span class="token punctuation">,</span> <span class="token string">'결산월'</span><span class="token punctuation">,</span> <span class="token string">'보고서종류'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>how<span class="token operator">=</span><span class="token string">'all'</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
pl <span class="token operator">=</span> pl<span class="token punctuation">[</span><span class="token operator">~</span>pl<span class="token punctuation">[</span><span class="token string">'항목명'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>contains<span class="token punctuation">(</span><span class="token string">'abstract'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

bs_ifrs <span class="token operator">=</span> bs<span class="token punctuation">[</span>bs<span class="token punctuation">[</span><span class="token string">'항목코드'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>contains<span class="token punctuation">(</span><span class="token string">'ifrs_'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
pl_ifrs <span class="token operator">=</span> pl<span class="token punctuation">[</span>pl<span class="token punctuation">[</span><span class="token string">'항목코드'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>contains<span class="token punctuation">(</span><span class="token string">'ifrs_|dart_'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> e <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'당기'</span><span class="token punctuation">,</span> <span class="token string">'전기'</span><span class="token punctuation">,</span> <span class="token string">'전전기'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    bs_ifrs<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> bs_ifrs<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">)</span>
    pl_ifrs<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> pl_ifrs<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">)</span>

<span class="token comment">#bs_ifrs.head(3)</span>

bs_prin <span class="token operator">=</span> bs_ifrs<span class="token punctuation">[</span>bs_ifrs<span class="token punctuation">[</span><span class="token string">'항목코드'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string">'ifrs_Assets'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_Liabilities'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_Equity'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_CurrentAssets'</span><span class="token punctuation">,</span> 
            <span class="token string">'ifrs_CurrentLiabilities'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_TradeAndOtherCurrentReceivables'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_OtherCurrentFinancialAssets'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_CashAndCashEquivalents'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'항목명'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">#bs_prin.head(3)</span>

pl_prin <span class="token operator">=</span> pl_ifrs<span class="token punctuation">[</span>pl_ifrs<span class="token punctuation">[</span><span class="token string">'항목코드'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string">'ifrs_Revenue'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_FinanceCosts'</span><span class="token punctuation">,</span>
            <span class="token string">'ifrs_ProfitLoss'</span><span class="token punctuation">,</span>
            <span class="token string">'dart_OperatingIncomeLoss'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'항목명'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">#pl_prin.head(3)</span>

consol_ <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>bs_prin<span class="token punctuation">,</span> pl_prin<span class="token punctuation">]</span><span class="token punctuation">)</span>

consol <span class="token operator">=</span> pd<span class="token punctuation">.</span>pivot_table<span class="token punctuation">(</span>consol_<span class="token punctuation">,</span> values<span class="token operator">=</span><span class="token string">'당기'</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token string">'항목코드'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token string">'종목코드'</span><span class="token punctuation">)</span>
consol_py <span class="token operator">=</span> pd<span class="token punctuation">.</span>pivot_table<span class="token punctuation">(</span>consol_<span class="token punctuation">,</span> values<span class="token operator">=</span><span class="token string">'전기'</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token string">'항목코드'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token string">'종목코드'</span><span class="token punctuation">)</span>

consol<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'ifrs_FinanceCosts'</span><span class="token punctuation">,</span> <span class="token string">'ifrs_Revenue'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> consol<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'ifrs_FinanceCosts'</span><span class="token punctuation">,</span> <span class="token string">'ifrs_Revenue'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
consol_py<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'ifrs_FinanceCosts'</span><span class="token punctuation">,</span> <span class="token string">'ifrs_Revenue'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> consol_py<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'ifrs_FinanceCosts'</span><span class="token punctuation">,</span> <span class="token string">'ifrs_Revenue'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

consol <span class="token operator">=</span> consol<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>how<span class="token operator">=</span><span class="token string">'any'</span><span class="token punctuation">)</span>
consol_py <span class="token operator">=</span> consol_py<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>how<span class="token operator">=</span><span class="token string">'any'</span><span class="token punctuation">)</span>

<span class="token comment">#consol.head(3)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div></div></div></div></div> <footer class="v-footer mt-0 theme--light" style="height:64px;background-color:#EEEEEE;border-color:#EEEEEE;" data-v-593c3a53><div class="layout justify-center" data-v-593c3a53><div class="caption grey--text" data-v-593c3a53>Powered by Vue.js(Vuepress + Vuetify)</div></div></footer></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cbae415f.js" defer></script><script src="/assets/js/3.aaca8d00.js" defer></script><script src="/assets/js/15.0147dcd6.js" defer></script>
  </body>
</html>
