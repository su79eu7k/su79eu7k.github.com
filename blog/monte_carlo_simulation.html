<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>몬테카를로 시뮬레이션(Monte Carlo Simulation) | Python for Process Innovation</title>
    <meta name="description" content="실제 비지니스 의사결정에 손쉽게 적용할 수 있을 법한 단순한 예제를 통해 몬테카를로 시뮬레이션을 살펴봅니다.">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    
    <link rel="preload" href="/assets/css/0.styles.a134bda1.css" as="style"><link rel="preload" href="/assets/js/app.cbae415f.js" as="script"><link rel="preload" href="/assets/js/3.aaca8d00.js" as="script"><link rel="preload" href="/assets/js/8.d7a6d9af.js" as="script"><link rel="prefetch" href="/assets/js/1.e3bfa02a.js"><link rel="prefetch" href="/assets/js/10.2c2e60c5.js"><link rel="prefetch" href="/assets/js/11.6a2083e9.js"><link rel="prefetch" href="/assets/js/12.bd920b11.js"><link rel="prefetch" href="/assets/js/13.96e0d6fa.js"><link rel="prefetch" href="/assets/js/14.34fb7b1d.js"><link rel="prefetch" href="/assets/js/15.0147dcd6.js"><link rel="prefetch" href="/assets/js/16.39351d19.js"><link rel="prefetch" href="/assets/js/17.1b6c10b7.js"><link rel="prefetch" href="/assets/js/18.b4a97ad2.js"><link rel="prefetch" href="/assets/js/19.c9be2942.js"><link rel="prefetch" href="/assets/js/20.bb23b3c9.js"><link rel="prefetch" href="/assets/js/21.fd38776d.js"><link rel="prefetch" href="/assets/js/22.e4efa8b6.js"><link rel="prefetch" href="/assets/js/23.966fa64f.js"><link rel="prefetch" href="/assets/js/24.f365213e.js"><link rel="prefetch" href="/assets/js/4.8afc31c3.js"><link rel="prefetch" href="/assets/js/5.33f50ecc.js"><link rel="prefetch" href="/assets/js/6.04a27dc0.js"><link rel="prefetch" href="/assets/js/7.07ea371c.js"><link rel="prefetch" href="/assets/js/9.eedbc95d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a134bda1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="layout" data-v-593c3a53><div data-app="true" id="main" class="application theme--light" data-v-593c3a53><div class="application--wrap"><div class="flex white" data-v-593c3a53><nav class="#EEEEEE v-toolbar v-toolbar--card theme--light" style="margin-top:0px;padding-right:0px;padding-left:0px;transform:translateY(0px);" data-v-593c3a53><div class="v-toolbar__content" style="height:56px;"><div class="v-toolbar__title" data-v-593c3a53>su79eu7k</div> <div class="spacer" data-v-593c3a53></div> <div class="v-toolbar__items" data-v-593c3a53><a href="/" class="v-btn v-btn--flat theme--light" data-v-593c3a53><div class="v-btn__content">Home</div></a> <a href="/blog/" class="v-btn v-btn--flat theme--light" data-v-593c3a53><div class="v-btn__content">Blog</div></a></div></div></nav> <div dark="" class="v-parallax" style="height:500px;" data-v-593c3a53><div class="v-parallax__image-container"><img src="https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg" alt="" class="v-parallax__image" style="display:block;opacity:0;transform:translate(-50%, 0px);"></div><div class="v-parallax__content"><div class="layout align-center column justify-center" data-v-593c3a53><div class="display-2 font-weight-bold mb-3" data-v-593c3a53>Python for Process Innovation</div> <div class="subheading" data-v-593c3a53>#Python, #Javascript, #SAP, #Automation, #ML, #AI</div></div></div></div> <div id="blog" data-v-0c44d7b6 data-v-593c3a53><div class="layout justify-center" data-v-0c44d7b6 data-v-0c44d7b6><div class="flex xs12 sm10 md10 lg8 xl8" data-v-0c44d7b6 data-v-0c44d7b6><div class="layout column" data-v-41180823 data-v-41180823 data-v-0c44d7b6><div class="flex mx-3 mt-4 mb-2" data-v-41180823 data-v-41180823><div class="display-2 font-weight-bold" data-v-41180823>몬테카를로 시뮬레이션(Monte Carlo Simulation)</div> <div class="body-1" data-v-41180823>
            Tags:
            
                #<a data-v-41180823>Statistics</a>
                #<a data-v-41180823>Python</a>
                #<a data-v-41180823>Algorithm</a></div> <div class="body-1" data-v-41180823>Update: 2019-04-17</div></div> <!----></div> <div class="content default" data-v-0c44d7b6><h2 id="몬테카를로-시뮬레이션"><a href="#몬테카를로-시뮬레이션" aria-hidden="true" class="header-anchor">#</a> 몬테카를로 시뮬레이션</h2> <p>몬테카를로 시뮬레이션(Monte Carlo Simulation)이란 임의의 무작위수들(Random Numbers)을 이용한 반복적인 연산을 통해 특정 함수(들)의 결과 값을 확률적(Probabilistic)으로 계산해 내는 알고리즘입니다. 여기서 확률적 계산이란 결정적(Deterministic) 계산과 대비되는 개념으로서, 이는 필연적으로 알고리즘의 반복과 방대한 양의 계산을 수반하기 때문에 기계를 활용한 수치셈(Computational Calculation)과 함께 언급되는 것이 일반적입니다.</p> <p>몬테카를로 시뮬레이션은 폴란드 출신의 수학자인 스타니스와프 울람(Stanislaw Ulam)이 개발하였으며 ‘예측이 어려운 결과에 대해서는 반복적 실험을 통해 예상되는 확률을 알아낼 수 있다’는 생각에 기초하여 도박으로 유명한 모나코의 도시 몬테카를로(Monte Carlo)의 이름을 따서 몬테카를로 시뮬레이션을 만들었다고 합니다.</p> <h2 id="예제"><a href="#예제" aria-hidden="true" class="header-anchor">#</a> 예제</h2> <p>아래에서는 제가 마시모 디 피에로, 『파이썬으로 배우는 실전 알고리즘』, 프리렉(2015), p308-p329의 사례를 참조하여 조금 더 이해하기 쉬운 새로운 예제를 만들어 보았습니다.</p> <blockquote><p>1,000원짜리 상품을 판매하는 (주)폭망은 요즘 재고가 자꾸 쌓이는 것 같아 고민이다. (주)폭망의 사장님은 오랜 경험을 통해 하루 평균 방문 고객 수는 557명, 표준편차는 183명인 정규분포를 따른다는 것을 알고 있으며, 방문 고객은 재고가 있는 경우 5%의 확률로 구매를 하고, 재고가 없는 경우 (주문 예약을 통해) 2.5%의 확률로 구매를 한다는 것도 대략적으로 알고 있다. (주)폭망의 재고유지비는 하루 300원이다.</p></blockquote> <p>위 요소들을 모두 반영하는 단일의 최적화 모델을 수식화 하는 것은 확률의 형태로 표현된 불확실성으로 인해 쉽지 않습니다. 대신 각 방문자를 가정에 따라 모델링 하여 몬테카를로 시뮬레이션을 통해 최적의 재고수준을 구하는 것은 의외로 어렵지 않다는 점을 아래 코드를 통해 알 수 있습니다.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> random
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token keyword">def</span> <span class="token function">sim</span><span class="token punctuation">(</span>stock<span class="token punctuation">)</span><span class="token punctuation">:</span>
    gain <span class="token operator">=</span> <span class="token number">0</span>
    loss <span class="token operator">=</span> <span class="token number">300</span><span class="token operator">*</span>stock
    <span class="token keyword">for</span> p <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>gauss<span class="token punctuation">(</span><span class="token number">557</span><span class="token punctuation">,</span> <span class="token number">183</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> stock <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.05</span><span class="token punctuation">:</span>
                stock <span class="token operator">-=</span> <span class="token number">1</span>
                gain <span class="token operator">+=</span> <span class="token number">1000</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.025</span><span class="token punctuation">:</span>
                gain <span class="token operator">+=</span> <span class="token number">1000</span>

    <span class="token keyword">return</span> gain<span class="token operator">-</span>loss

<span class="token keyword">def</span> <span class="token function">iter_sim</span><span class="token punctuation">(</span>max_stock<span class="token punctuation">,</span> how_many<span class="token punctuation">)</span><span class="token punctuation">:</span>
    final <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>how_many<span class="token punctuation">)</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> stock <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> max_stock<span class="token punctuation">)</span><span class="token punctuation">:</span>
            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>sim<span class="token punctuation">(</span>stock<span class="token punctuation">)</span><span class="token punctuation">)</span>

        final<span class="token punctuation">.</span>append<span class="token punctuation">(</span>result<span class="token punctuation">)</span>

    <span class="token comment"># 시각화</span>
    plt<span class="token punctuation">.</span>style<span class="token punctuation">.</span>use<span class="token punctuation">(</span><span class="token string">'seaborn-whitegrid'</span><span class="token punctuation">)</span>
    output <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>final<span class="token punctuation">)</span>
    ax <span class="token operator">=</span> output<span class="token punctuation">.</span>T<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>lw<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> legend<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">&quot;Stock&quot;</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">&quot;Gain / Loss&quot;</span><span class="token punctuation">)</span>

    output<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>lw<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> legend<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    iter_sim<span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="결론"><a href="#결론" aria-hidden="true" class="header-anchor">#</a> 결론</h2> <p>결과를 간단하게 시각화해보면 아래와 같으며, 매우 얇게 표현된 검은 선 하나 하나가 보유 재고 수준별로 가정된 분포를 따르는 방문자수에 대해 수행된 시뮬레이션이고, 이를 약 100회 반복한 결과를 보실 수 있습니다. 보다 효과적인 분석을 위해 해당 시뮬레이션들의 평균을 두꺼운 붉은색 선으로 표기한 결과, 사례의 경우에는 대략 20여개 수준의 여유 재고를 유지하는 것이 '(1) 확률적으로, (2) 재고유지비용과 손익을 고려하여'' 최적임을 보여주고 있습니다.</p> <p><img src="/assets/img/monte_carlo_simulation_001.e8d0db85.png" alt="monte_carlo_simulation_001"></p> <p>위 예제에서 느끼셨겠지만 구현 자체가 어렵지도 않고, 꽤 재미도 있으며 무엇보다도 마음만 먹으면 충분히 실무에 응용도 할 수 있습니다. 제 경우에는 다변수 재고 모형(BOM을 고려한 조립품의 재고 배합)에 대해 최적의 KPI를 찾기 위해 유사한 시뮬레이션을 구현한 적이 있습니다. 또 다른 재미있고 좋은 사례가 있으시다면 제게도 소개해주시면 감사하겠습니다.</p></div></div></div></div> <footer class="v-footer mt-0 theme--light" style="height:64px;background-color:#EEEEEE;border-color:#EEEEEE;" data-v-593c3a53><div class="layout justify-center" data-v-593c3a53><div class="caption grey--text" data-v-593c3a53>Powered by Vue.js(Vuepress + Vuetify)</div></div></footer></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cbae415f.js" defer></script><script src="/assets/js/3.aaca8d00.js" defer></script><script src="/assets/js/8.d7a6d9af.js" defer></script>
  </body>
</html>
